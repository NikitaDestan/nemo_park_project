{% extends 'nemo_park/base.html' %}

{% block title %}–ú–æ—è –∑–∞—Ä–ø–ª–∞—Ç–∞{% endblock %}

{% block content %}
<div class="page-title">üí∞ –ú–æ–∏ —Ä–∞—Å—á—ë—Ç–Ω—ã–µ –ª–∏—Å—Ç—ã</div>

{% if employee %}
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">üë§</div>
            <div class="stat-number" style="font-size: 1.3rem;">{{ employee.full_name }}</div>
            <div class="stat-label">{{ employee.get_position_display }}</div>
        </div>
        <div class="stat-card green">
            <div class="stat-icon">üíµ</div>
            <div class="stat-number">{{ total_earned|floatformat:0 }} ‚ÇΩ</div>
            <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—É—á–µ–Ω–æ</div>
        </div>
    </div>

    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>üìÖ –ü–µ—Ä–∏–æ–¥</th>
                    <th>‚è±Ô∏è –ß–∞—Å–æ–≤</th>
                    <th>üíµ –ù–∞—á–∏—Å–ª–µ–Ω–æ</th>
                    <th>üí∞ –ö –≤—ã–ø–ª–∞—Ç–µ</th>
                    <th>üìä –°—Ç–∞—Ç—É—Å</th>
                    <th>üëÅÔ∏è</th>
                </tr>
            </thead>
            <tbody>
                {% for payroll in payrolls %}
                <tr>
                    <td>{{ payroll.period_start|date:"d.m" }} ‚Äî {{ payroll.period_end|date:"d.m.Y" }}</td>
                    <td>{{ payroll.total_hours|floatformat:1 }}—á</td>
                    <td>{{ payroll.gross_salary|floatformat:0 }} ‚ÇΩ</td>
                    <td><strong style="color: #00b894;">{{ payroll.net_salary|floatformat:0 }} ‚ÇΩ</strong></td>
                    <td>
                        {% if payroll.status == 'paid' %}
                            <span class="badge" style="background: #00b894; color: white;">‚úÖ –í—ã–ø–ª–∞—á–µ–Ω–æ</span>
                        {% else %}
                            <span class="badge" style="background: #f39c12; color: white;">‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ</span>
                        {% endif %}
                    </td>
                    <td><a href="{% url 'payroll_detail' payroll.pk %}" class="btn btn-primary" style="padding: 6px 10px;">üëÅÔ∏è</a></td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" style="text-align: center; padding: 40px; color: #999;">
                        <div style="font-size: 3rem; margin-bottom: 10px;">üì≠</div>
                        –†–∞—Å—á—ë—Ç–Ω—ã—Ö –ª–∏—Å—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <div class="alert alert-warning">
        ‚ö†Ô∏è –£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.
    </div>
{% endif %}
{% endblock %}