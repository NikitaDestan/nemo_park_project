{% extends 'nemo_park/base.html' %}

{% block title %}–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏{% endblock %}

{% block content %}
<h2>üë• –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</h2>

<table>
    <tr>
        <th>–ò–º—è</th>
        <th>–§–∞–º–∏–ª–∏—è</th>
        <th>–î–æ–ª–∂–Ω–æ—Å—Ç—å</th>
        <th>–ó–∞—Ä–ø–ª–∞—Ç–∞</th>
        <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
        <th>Email</th>
        <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
        <th>–õ–æ–≥–∏–Ω</th>
        <th>–°—Ç–∞—Ç—É—Å</th>
        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
    </tr>
    {% for employee in employees %}
    <tr>
        <td>{{ employee.first_name }}</td>
        <td>{{ employee.last_name }}</td>
        <td>{{ employee.get_position_display }}</td>
        <td>
            {% if employee.position == 'user' %}
                <span style="color: #999;">-</span>
            {% else %}
                {{ employee.salary }} —Ä—É–±.
            {% endif %}
        </td>
        <td>{{ employee.phone|default:"-" }}</td>
        <td>{{ employee.email|default:"-" }}</td>
        <td>{{ employee.hire_date|date:"d.m.Y" }}</td>
        <td>
            {% if employee.customuser %}
                {{ employee.customuser.username }}
            {% else %}
                <span style="color: #999;">–ù–µ—Ç –ª–æ–≥–∏–Ω–∞</span>
            {% endif %}
        </td>
        <td>
            {% if employee.position == 'user' %}
                <span style="color: #ff6b00;">‚è≥ –û–∂–∏–¥–∞–µ—Ç</span>
            {% else %}
                <span style="color: #28a745;">‚úÖ –ê–∫—Ç–∏–≤–µ–Ω</span>
            {% endif %}
        </td>
        <td>
            {% if user.role == 'admin' %}
            <a href="{% url 'edit_employee' employee.id %}" style="color: #007cba; text-decoration: none;">‚úèÔ∏è</a>
            <a href="{% url 'delete_employee' employee.id %}" style="color: #dc3545; text-decoration: none; margin-left: 10px;">üóëÔ∏è</a>
            {% else %}
            <span style="color: #999;">–¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä</span>
            {% endif %}
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="10" style="text-align: center;">–ù–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤</td>
    </tr>
    {% endfor %}
</table>
<br>
{% if user.role == 'admin' %}
<a href="{% url 'add_employee' %}">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</a>
{% endif %}
{% endblock %}